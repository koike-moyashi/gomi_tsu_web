<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="description" content="このごみ、なにゴミ？にゅうりょくひとつで かんたんけんさく。みえけんつしの ゴミぶんべつを けんさくできるサイトです。" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <meta name="apple-mobile-web-app-title" content="ぶんべつさん" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta property="og:locale" content="ja_JP" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="ぶんべつさん（ひらがな）" />
        <meta property="og:site_name" content="ぶんべつさん － つしのごみはぼくにまかせろ!" />
        <meta property="og:url" content="https://gomi-tsu.moyashi-koubou.com/" />
        <meta property="og:description" content="このごみ、なにゴミ？にゅうりょくひとつで かんたんけんさく。みえけんつしの ゴミぶんべつを けんさくできるサイトです。" />
        <meta property="og:image" content="https://gomi-tsu.moyashi-koubou.com/img/facebook_ogp.png" />
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="ぶんべつさん － つしのごみはぼくにまかせろ!" />
        <meta name="twitter:description" content="このごみ、なにゴミ？にゅうりょくひとつで かんたんけんさく。みえけんつしの ゴミぶんべつを けんさくできるサイトです。" />
        <meta name="twitter:image" content="https://gomi-tsu.moyashi-koubou.com/img/facebook_ogp.png" />
        <title>ぶんべつさん | みえけんつしの ゴミぶんべつ けんさく（ひらがな）</title>
        <link rel="apple-touch-icon" href="img/trash_can_b_114.png" />
        <link rel="shortcut icon" href="img/trash_can_b_114.png" />
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
        <link rel="stylesheet" href="css/jquery.bootgrid.css" />
        <link rel="stylesheet" href="css/style.css" />
    </head>
    <body>
        <div class="wrap">
            <div id="header">
                <div class="col-md-10 col-md-offset-1">
                    <div class="title">
                        <a href="/">ぶんべつさん - つしのごみはぼくにまかせろ!</a>
                    </div>
                    <div class="language"><a href="/">日本語</a> | <a href="gomi_ja_hira.html" class="current">ひらがな</a> | <a href="readme.html">はじめての方へ</a></div>
                </div>
            </div>
            <div id="contents" class="col-md-8 col-md-offset-2">
                <div class="logo">
                    <a href="/"><img src="img/trash_can_b_open.png" /></a>
                    <div id="gomi_msg"></div>
                </div>

                <div id="main_table-header" class="bootgrid-header container-fluid">
                    <div class="row">
                        <div class="col-sm-12 actionBar">
                            <div class="search form-group">
                                <div class="input-group"><span class="icon glyphicon input-group-addon glyphicon-search"></span> <input type="text" id="searchInput" class="search-field form-control" placeholder="ここに にゅうりょく" /></div>
                            </div>
                            <div id="input_msg" class="h6 text-left"></div>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table id="main_table" class="table table-condensed table-hover table-striped">
                        <thead>
                            <tr>
                                <th data-column-id="hinmoku" style="min-width: 140px">ひんもく</th>
                                <th data-column-id="kubun">ぶんべつ</th>
                                <th data-column-id="tyuui" data-header-css-class="comment">ちゅうい</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div id="footer">
                <div class="col-md-10 col-md-offset-1">
                    <div class="guidebook">
                        <a href="readme.html"><span class="glyphicon glyphicon-trash"></span>はじめてのかたへ</a>
                    </div>
                    <div class="guidebook">
                        <a href="https://www.info.city.tsu.mie.jp/www/genre/1100000000011/index.html"><span class="glyphicon glyphicon-calendar"></span>しゅうしゅうカレンダー</a>
                    </div>
                    <div class="guidebook">
                        <a href="https://www.info.city.tsu.mie.jp/www/genre/1100000000021/index.html"><span class="glyphicon glyphicon-leaf"></span>エコステーションいちらん</a>
                    </div>
                    <div class="guidebook">
                        <a href="privacy_policy.html"><span class="glyphicon glyphicon-heart"></span>プライバシーポリシー</a>
                    </div>
                    <div class="guidebook">
                        <a href="https://play.google.com/store/apps/details?id=com.moyashikoubou.bunbetusan"><span class="glyphicon glyphicon-phone"></span>Androidアプリ</a>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        <script src="js/papaparse.min.js"></script>
        <script>
            //loading画面を出す
            $(function () {
                // CSVファイルのパス
                var csvFilePath = "./csv/tsu_gomi.ja_hira.utf8.csv";

                // CSVファイルの読み込みと検索
                $(document).ready(function () {
                    // CSVファイルを非同期で読み込む
                    Papa.parse(csvFilePath, {
                        download: true,
                        header: true,
                        skipEmptyLines: true,
                        complete: function (results) {
                            var data = results.data;
                            // 検索用の関数
                            function search(query) {
                                var searchResults = [];
                                data.forEach(function (row) {
                                    // 各行の値を検索する
                                    for (var key in row) {
                                        if (key == "hiragana") {
                                            let value = row[key];
                                            if (value.indexOf(query) != -1) {
                                                // 検索文字列が見つかった場合は結果に追加
                                                searchResults.push(row);
                                                break;
                                            }
                                        }
                                    }
                                });
                                return searchResults;
                            }

                            // 入力された文字列で検索を実行
                            $("#searchInput").on("input", function () {
                                var query = $(this).val().trim(); // 前後の空白を削除
                                if (query.length == 1) {
                                    // 1文字以上の入力がある場合のみ検索を行う
                                    $("#input_msg").html("２もじよりおおく にゅうりょう してください。１もじのばあいは、ひらがなをいれてください。れい）土→つち");
                                } else if (query.length >= 2) {
                                    $("#input_msg").empty();
                                    // 1文字以上の入力がある場合のみ検索を行う
                                    var results = search(query);
                                    displayResults(results);
                                } else {
                                    $("#main_table tbody").empty(); // 入力が基準未満の場合は検索結果をクリア
                                }
                            });

                            // 検索結果を表示する
                            function displayResults(results) {
                                var tableBody = $("#main_table tbody");
                                tableBody.empty(); // テーブルをクリア
                                if (results.length > 0) {
                                    results.forEach(function (result) {
                                        // テーブルの行を追加
                                        var rowHtml = "<tr>";
                                        if (result.hasOwnProperty("hinmoku")) {
                                            rowHtml += "<td>" + result["hinmoku"] + "</td>";
                                        }
                                        if (result.hasOwnProperty("kubun")) {
                                            rowHtml += "<td>" + result["kubun"] + "</td>";
                                        }
                                        if (result.hasOwnProperty("note")) {
                                            rowHtml += "<td>" + result["note"] + "</td>";
                                        }
                                        rowHtml += "</tr>";
                                        tableBody.append(rowHtml);
                                    });
                                } else {
                                    tableBody.append("<tr><td colspan='3'>みつかりませんでした。<a href='noresult.html'><b>こちらをクリック</b>してください</a>。</td></tr>");
                                }
                            }
                        },
                    });
                    let gomi_msg = [
                        "ゴミぶんべつする あなたは すてき",
                        "すてるべきか、すてざるべきか、じんせいは けつだんの れんぞく…",
                        "あなたって ちきゅうに やさしいのね",
                        "ぶんべつしてえらい！あなたに ノーベルえらいでしょうを おくります！",
                        "ゴミぶくろは ゴミばこのそこに しゅうのうすると べんりだぞ〜",
                        "ゴミぶくろの はいってたふくろが ゴミになるの、モヤッとしません？",
                        "ゴミが かたづくと きもちがスッキリして いいぞう！",
                        "きのうあった いやなこと、ゴミと いっしょにすてちゃえ〜",
                        "ゴミぶんべつは ぼくに まかせろ！",
                        "まだ つかえるものは リサイクルショップに もってくのも いいよね",
                        "かたづけの とちゅうで マンガよんじゃうの あるある〜！",
                        "いつも ぶんべつしてくれて ありがとう。あなたに いいことが ありますように！",
                        "きちんと ぶんべつ できると きもちいい〜！",
                        "きちんと ぶんべつすることで とくをつめるらしいぞ〜！",
                    ];
                    let random = Math.floor(Math.random() * gomi_msg.length);
                    $("#gomi_msg").text(gomi_msg[random]);
                });
            });
        </script>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-080FPFJG5W"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());

            gtag("config", "G-080FPFJG5W");
        </script>
    </body>
</html>
